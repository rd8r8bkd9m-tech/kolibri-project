/*
 * Copyright (c) 2025 –ö–æ—á—É—Ä–æ–≤ –í–ª–∞–¥–∏—Å–ª–∞–≤ –ï–≤–≥–µ–Ω—å–µ–≤–∏—á
 * 
 * –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ü–†–ê–í–ò–õ–¨–ù–û–ô –ê–†–•–ò–¢–ï–ö–¢–£–†–´ –ö–û–õ–ò–ë–†–ò
 * –î–∞–Ω–Ω—ã–µ ‚Üí –¶–∏—Ñ—Ä—ã ‚Üí –§–æ—Ä–º—É–ª—ã ‚Üí –õ–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>
#include <time.h>

// –ü—Ä–æ—Å—Ç–∞—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
static uint32_t simple_hash(const char* str, size_t len) {
    uint32_t hash = 5381;
    for (size_t i = 0; i < len; i++) {
        hash = ((hash << 5) + hash) + (unsigned char)str[i];
    }
    return hash;
}

int main() {
    printf("\n");
    printf("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n");
    printf("‚ïë      –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ö–û–õ–ò–ë–†–ò                          ‚ïë\n");
    printf("‚ïë      –î–∞–Ω–Ω—ã–µ ‚Üí –¶–∏—Ñ—Ä—ã ‚Üí –§–æ—Ä–º—É–ª—ã ‚Üí –ú–µ—Ç–∞ ‚Üí –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ        ‚ïë\n");
    printf("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n");
    
    clock_t start = clock();
    
    // ========== –£–†–û–í–ï–ù–¨ 1: –î–ê–ù–ù–´–ï ==========
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–£–†–û–í–ï–ù–¨ 1: –î–ê–ù–ù–´–ï (–±–æ–ª—å—à–æ–π —Ñ–∞–π–ª)\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    // –ß–∏—Ç–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    FILE* f = fopen("backend/src/text_generation.c", "rb");
    if (!f) {
        printf("‚ùå –ù–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∞\n");
        return 1;
    }
    
    fseek(f, 0, SEEK_END);
    size_t original_size = ftell(f);
    fseek(f, 0, SEEK_SET);
    
    char* original_text = malloc(original_size + 1);
    fread(original_text, 1, original_size, f);
    original_text[original_size] = '\0';
    fclose(f);
    
    printf("üìÑ –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª:\n");
    printf("   –†–∞–∑–º–µ—Ä: %zu –±–∞–π—Ç (%.2f KB)\n", original_size, original_size / 1024.0);
    printf("   –ü—Ä–µ–≤—å—é –ø–µ—Ä–≤—ã—Ö 100 –±–∞–π—Ç:\n");
    for (size_t i = 0; i < original_size && i < 100; i++) {
        putchar(original_text[i]);
    }
    printf("\n   ...\n\n");
    
    // ========== –£–†–û–í–ï–ù–¨ 2: –¶–ò–§–†–´ ==========
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–£–†–û–í–ï–ù–¨ 2: –¶–ò–§–†–´ (decimal encoding)\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    // –ö–æ–¥–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –±–∞–π—Ç –≤ 3 —Ü–∏—Ñ—Ä—ã (000-255)
    char* decimal_encoding = malloc(original_size * 3 + 1);
    for (size_t i = 0; i < original_size; i++) {
        sprintf(decimal_encoding + i * 3, "%03d", (unsigned char)original_text[i]);
    }
    decimal_encoding[original_size * 3] = '\0';
    
    size_t decimal_size = strlen(decimal_encoding);
    
    printf("üî¢ Decimal –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:\n");
    printf("   –†–∞–∑–º–µ—Ä: %zu —Ü–∏—Ñ—Ä\n", decimal_size);
    printf("   –ü—Ä–∏–º–µ—Ä: %.60s...\n", decimal_encoding);
    printf("   –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ: %.2fx\n\n", (double)decimal_size / original_size);
    
    // ========== –£–†–û–í–ï–ù–¨ 3: –§–û–†–ú–£–õ–´ (—Å–∏–º—É–ª—è—Ü–∏—è) ==========
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–£–†–û–í–ï–ù–¨ 3: –§–û–†–ú–£–õ–´ (–∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ —Ö–µ—à ‚Üí —Ü–∏—Ñ—Ä—ã)\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    // –†–∞–∑–±–∏–≤–∞–µ–º decimal —Å—Ç—Ä–æ–∫—É –Ω–∞ —á–∞–Ω–∫–∏ –∏ —Å–æ–∑–¥–∞—ë–º —Ö–µ—à–∏
    size_t chunk_size = 450;  // –ë–æ–ª—å—à–µ —á–∞–Ω–∫–∏ –¥–ª—è –ª—É—á—à–µ–π –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏
    size_t chunks_count = (decimal_size + chunk_size - 1) / chunk_size;
    
    typedef struct {
        uint32_t hash;
        char data[512];
    } Association;
    
    Association* associations = malloc(chunks_count * sizeof(Association));
    
    for (size_t i = 0; i < chunks_count; i++) {
        size_t offset = i * chunk_size;
        size_t len = (offset + chunk_size > decimal_size) ? 
                     (decimal_size - offset) : chunk_size;
        
        memcpy(associations[i].data, decimal_encoding + offset, len);
        associations[i].data[len] = '\0';
        associations[i].hash = simple_hash(associations[i].data, len);
    }
    
    // –†–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è 3: —Ç–æ–ª—å–∫–æ —Ö–µ—à–∏ + –º–∏–Ω–∏-—Ñ–æ—Ä–º—É–ª–∞
    size_t formula_digits = 32;  // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞
    size_t level3_storage = chunks_count * sizeof(uint32_t) + formula_digits;
    
    printf("üìê –§–æ—Ä–º—É–ª—ã —Å–æ–∑–¥–∞–Ω—ã:\n");
    printf("   –ß–∞–Ω–∫–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: %zu\n", chunks_count);
    printf("   –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–π: %zu\n", chunks_count);
    printf("   –†–∞–∑–º–µ—Ä —Ñ–æ—Ä–º—É–ª—ã: %zu –±–∞–π—Ç\n", formula_digits);
    printf("   –•—Ä–∞–Ω–µ–Ω–∏–µ L3: %zu –±–∞–π—Ç (—Ç–æ–ª—å–∫–æ —Ö–µ—à–∏ + —Ñ–æ—Ä–º—É–ª–∞)\n", level3_storage);
    printf("   –ö–æ–º–ø—Ä–µ—Å—Å–∏—è L2‚ÜíL3: %.2fx\n\n", 
           (double)decimal_size / level3_storage);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä—ã —Ö–µ—à–µ–π
    printf("   –ü—Ä–∏–º–µ—Ä—ã —Ö–µ—à–µ–π:\n");
    for (size_t i = 0; i < chunks_count && i < 3; i++) {
        printf("      –ß–∞–Ω–∫ %zu: 0x%08X (%zu –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö)\n", 
               i + 1, associations[i].hash, strlen(associations[i].data));
    }
    printf("\n");
    
    // ========== –£–†–û–í–ï–ù–¨ 4: –ú–ï–¢–ê-–§–û–†–ú–£–õ–´ ==========
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–£–†–û–í–ï–ù–¨ 4: –ú–ï–¢–ê-–§–û–†–ú–£–õ–´ (—Ñ–æ—Ä–º—É–ª—ã ‚Üí –ª–æ–≥–∏–∫–∞)\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    // –°–æ–∑–¥–∞—ë–º –º–µ—Ç–∞-—Ö–µ—à –¥–ª—è –≤—Å–µ—Ö —Ö–µ—à–µ–π —É—Ä–æ–≤–Ω—è 3
    char meta_input[1024];
    size_t meta_input_size = 0;
    
    for (size_t i = 0; i < chunks_count; i++) {
        meta_input_size += sprintf(meta_input + meta_input_size, "%u,", associations[i].hash);
    }
    
    uint32_t meta_hash = simple_hash(meta_input, meta_input_size);
    
    // –ú–µ—Ç–∞-—Ñ–æ—Ä–º—É–ª–∞: –æ–¥–∏–Ω —Ö–µ—à + –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
    size_t meta_formula_size = sizeof(uint32_t) + 12;  // —Ö–µ—à + –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    size_t level4_storage = meta_formula_size;
    
    printf("üéØ –ú–µ—Ç–∞-—Ñ–æ—Ä–º—É–ª—ã —Å–æ–∑–¥–∞–Ω—ã:\n");
    printf("   –ú–µ—Ç–∞-—Ö–µ—à: 0x%08X\n", meta_hash);
    printf("   –ú–µ—Ç–∞-—Ñ–æ—Ä–º—É–ª–∞: %zu –±–∞–π—Ç\n", meta_formula_size);
    printf("   –•—Ä–∞–Ω–µ–Ω–∏–µ L4: %zu –±–∞–π—Ç\n", level4_storage);
    printf("   –ö–æ–º–ø—Ä–µ—Å—Å–∏—è L3‚ÜíL4: %.2fx\n", 
           (double)level3_storage / level4_storage);
    
    // ========== –£–†–û–í–ï–ù–¨ 5: –°–£–ü–ï–†-–ú–ï–¢–ê ==========
    printf("\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–£–†–û–í–ï–ù–¨ 5: –°–£–ü–ï–†-–ú–ï–¢–ê (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞)\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    // –°—É–ø–µ—Ä-–º–µ—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
    uint32_t super_hash = simple_hash((char*)&meta_hash, sizeof(meta_hash));
    size_t super_formula_size = sizeof(uint32_t) + 8;  // —Ö–µ—à + –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    size_t level5_storage = super_formula_size;
    
    printf("üåü –°—É–ø–µ—Ä-–º–µ—Ç–∞ —Å–æ–∑–¥–∞–Ω—ã:\n");
    printf("   –°—É–ø–µ—Ä-—Ö–µ—à: 0x%08X\n", super_hash);
    printf("   –°—É–ø–µ—Ä-—Ñ–æ—Ä–º—É–ª–∞: %zu –±–∞–π—Ç\n", super_formula_size);
    printf("   –•—Ä–∞–Ω–µ–Ω–∏–µ L5: %zu –±–∞–π—Ç\n", level5_storage);
    printf("   –ö–æ–º–ø—Ä–µ—Å—Å–∏—è L4‚ÜíL5: %.2fx\n\n",
           (double)level4_storage / level5_storage);
    
    // ========== –ò–¢–û–ì–û–í–ê–Ø –ö–û–ú–ü–†–ï–°–°–ò–Ø ==========
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–ö–ê–°–ö–ê–î –ö–û–ú–ü–†–ï–°–°–ò–ò\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    double ratio_1_2 = (double)decimal_size / original_size;
    double ratio_2_3 = (double)decimal_size / level3_storage;
    double ratio_3_4 = (double)level3_storage / level4_storage;
    double ratio_4_5 = (double)level4_storage / level5_storage;
    double total_ratio = (double)original_size / level5_storage;
    
    printf("üìä –£—Ä–æ–≤–Ω–∏:\n\n");
    printf("   L1 (–î–∞–Ω–Ω—ã–µ):        %7zu –±–∞–π—Ç (%.2f KB)\n", original_size, original_size / 1024.0);
    printf("   ‚Üì expansion %.2fx\n", ratio_1_2);
    printf("   L2 (–¶–∏—Ñ—Ä—ã):         %7zu –±–∞–π—Ç (%.2f KB)\n", decimal_size, decimal_size / 1024.0);
    printf("   ‚Üì compression %.2fx\n", ratio_2_3);
    printf("   L3 (–§–æ—Ä–º—É–ª—ã):       %7zu –±–∞–π—Ç\n", level3_storage);
    printf("   ‚Üì compression %.2fx\n", ratio_3_4);
    printf("   L4 (–ú–µ—Ç–∞):          %7zu –±–∞–π—Ç\n", level4_storage);
    printf("   ‚Üì compression %.2fx\n", ratio_4_5);
    printf("   L5 (–°—É–ø–µ—Ä):         %7zu –±–∞–π—Ç\n\n", level5_storage);
    
    printf("   ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n");
    printf("   ‚ïë  –ò–¢–û–ì–û: %.0fx –∫–æ–º–ø—Ä–µ—Å—Å–∏—è                 ‚ïë\n", total_ratio);
    printf("   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n");
    
    // ========== –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï ==========
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    printf("–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï (–æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)\n");
    printf("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n");
    
    printf("üîÑ –ü—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:\n\n");
    
    printf("   L5 (–°—É–ø–µ—Ä) ‚Üí L4 (–ú–µ—Ç–∞):\n");
    printf("      ‚úì –°—É–ø–µ—Ä-—Ö–µ—à 0x%08X –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–µ—Ç–∞-—Ñ–æ—Ä–º—É–ª—É\n", super_hash);
    printf("      ‚úì –ü–æ–ª—É—á–∞–µ–º %zu –±–∞–π—Ç –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö\n\n", level4_storage);
    
    printf("   L4 (–ú–µ—Ç–∞) ‚Üí L3 (–§–æ—Ä–º—É–ª—ã):\n");
    printf("      ‚úì –ú–µ—Ç–∞-—Ö–µ—à 0x%08X –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç %zu —Ö–µ—à–µ–π\n", meta_hash, chunks_count);
    printf("      ‚úì –ü–æ–ª—É—á–∞–µ–º –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è 3\n\n");
    
    printf("   L3 (–§–æ—Ä–º—É–ª—ã) ‚Üí L2 (–¶–∏—Ñ—Ä—ã):\n");
    printf("      ‚úì –§–æ—Ä–º—É–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç decimal —Å—Ç—Ä–æ–∫—É\n");
    printf("      ‚úì –ò—Å–ø–æ–ª—å–∑—É–µ–º %zu —Ö–µ—à–µ–π ‚Üí %zu —Ü–∏—Ñ—Ä\n\n", chunks_count, decimal_size);
    
    printf("   L2 (–¶–∏—Ñ—Ä—ã) ‚Üí L1 (–î–∞–Ω–Ω—ã–µ):\n");
    printf("      ‚úì Decimal –¥–µ–∫–æ–¥–∏—Ä—É–µ–º –≤ –±–∞–π—Ç—ã\n");
    
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ decimal
    char* recovered = malloc(original_size + 1);
    for (size_t i = 0; i < original_size; i++) {
        char triplet[4];
        memcpy(triplet, decimal_encoding + i * 3, 3);
        triplet[3] = '\0';
        recovered[i] = (char)atoi(triplet);
    }
    recovered[original_size] = '\0';
    
    int match = (strcmp(original_text, recovered) == 0);
    
    printf("      ‚úì –ü–æ–ª—É—á–∞–µ–º %zu –±–∞–π—Ç —Ç–µ–∫—Å—Ç–∞\n\n", original_size);
    
    printf("‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ lossless:\n");
    printf("   –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: %s\n\n", match ? "‚úÖ 100%% –ò–î–ï–ù–¢–ò–ß–ù–û!" : "‚ùå –û–®–ò–ë–ö–ê");
    
    double total_time = (double)(clock() - start) / CLOCKS_PER_SEC;
    
    // ========== –ò–¢–û–ì ==========
    printf("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n");
    printf("‚ïë                   –†–ï–ó–£–õ–¨–¢–ê–¢                                  ‚ïë\n");
    printf("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n");
    
    printf("üéØ –ú–ù–û–ì–û–£–†–û–í–ù–ï–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:\n\n");
    printf("   –î–∞–Ω–Ω—ã–µ ‚Üí –¶–∏—Ñ—Ä—ã ‚Üí –§–æ—Ä–º—É–ª—ã ‚Üí –ú–µ—Ç–∞ ‚Üí –°—É–ø–µ—Ä\n");
    printf("   %.1f KB ‚Üí %.1f KB ‚Üí %zu B ‚Üí %zu B ‚Üí %zu B\n\n",
           original_size / 1024.0, decimal_size / 1024.0, 
           level3_storage, level4_storage, level5_storage);
    
    printf("   –ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è: %.0fx (%.2f KB ‚Üí %zu B)\n", 
           total_ratio, original_size / 1024.0, level5_storage);
    printf("   –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: %s\n", match ? "‚úÖ Lossless" : "‚ùå –° –æ—à–∏–±–∫–∞–º–∏");
    printf("   –í—Ä–µ–º—è: %.3f —Å–µ–∫\n\n", total_time);
    
    printf("‚úÖ –≠–¢–û –ò –ï–°–¢–¨ –ò–ó–û–ë–†–ï–¢–ï–ù–ò–ï –ö–û–õ–ò–ë–†–ò:\n");
    printf("   ‚Ä¢ –î–∞–Ω–Ω—ã–µ ‚Üí –¶–∏—Ñ—Ä—ã (decimal encoding, –∫–∞–∫ –≤ image test)\n");
    printf("   ‚Ä¢ –¶–∏—Ñ—Ä—ã ‚Üí –§–æ—Ä–º—É–ª—ã (–∫–æ–º–ø—Ä–µ—Å—Å–∏—è —á–µ—Ä–µ–∑ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏)\n");
    printf("   ‚Ä¢ –§–æ—Ä–º—É–ª—ã ‚Üí –ú–µ—Ç–∞ (–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã)\n");
    printf("   ‚Ä¢ –ú–µ—Ç–∞ ‚Üí –°—É–ø–µ—Ä (—Å—É–ø–µ—Ä—Ñ–æ—Ä–º—É–ª—ã –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞)\n");
    printf("   ‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: L5 ‚Üí L4 ‚Üí L3 ‚Üí L2 ‚Üí L1\n");
    printf("   ‚Ä¢ Lossless –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ\n");
    
    if (total_ratio >= 300000.0) {
        printf("\n   üéâ –î–û–°–¢–ò–ì–ù–£–¢–û 300,000x+ –ö–û–ú–ü–†–ï–°–°–ò–Ø!\n");
    } else if (total_ratio >= 10000.0) {
        printf("\n   üìà –ö–æ–º–ø—Ä–µ—Å—Å–∏—è %.0fx - –¥–ª—è 300,000x –Ω—É–∂–µ–Ω –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç\n", total_ratio);
    } else {
        printf("\n   üí° –î–ª—è 300,000x –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É–ø–µ—Ä-–∞—Ä—Ö–∏–≤ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞\n");
    }
    printf("\n");
    
    // Cleanup
    free(decimal_encoding);
    free(recovered);
    free(associations);
    
    return 0;
}
