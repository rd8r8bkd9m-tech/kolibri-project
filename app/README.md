# Kolibri Smeta - –ú—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å–º–µ—Ç

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–º–µ—Ç –ø–æ –Ω–æ—Ä–º–∞–º –§–ï–†, –ì–≠–°–ù, –¢–ï–† —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –∏ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–æ–º.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –†–∞—Å—á–µ—Ç —Å–º–µ—Ç –ø–æ –§–ï–†/–ì–≠–°–ù/–¢–ï–†
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ)
- ‚úÖ –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤ —Ä–∞–±–æ—Ç (–º¬≤, –º¬≥, –ø–æ–≥–æ–Ω–Ω—ã–µ –º–µ—Ç—Ä—ã)
- ‚úÖ –†–∞–±–æ—Ç–∞ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF, Excel, Word, JSON
- ‚úÖ –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ —Å–µ–∑–æ–Ω–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- ‚úÖ –®–∞–±–ª–æ–Ω—ã —Å–º–µ—Ç
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (iOS/Android)

### AI –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ü§ñ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é
- ü§ñ –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–±—ä–µ–∫—Ç–æ–≤
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ—Ç
- ü§ñ –ü–æ–¥–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –Ω–æ—Ä–º
- ü§ñ –ü–∞—Ä—Å–∏–Ω–≥ BIM/IFC —Ñ–∞–π–ª–æ–≤ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### WASM –Ø–¥—Ä–æ
- ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (10x –±—ã—Å—Ç—Ä–µ–µ JS)
- ‚ö° –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–æ–≤ –ø–æ–º–µ—â–µ–Ω–∏–π
- ‚ö° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- ‚ö° –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Å–º–µ—Ç

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ backend/          # NestJS Backend API
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ smeta/      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ norms/      # –ë–∞–∑–∞ –Ω–æ—Ä–º –§–ï–†/–ì–≠–°–ù/–¢–ï–†
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai/         # AI –∞–Ω–∞–ª–∏–∑ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export/     # –≠–∫—Å–ø–æ—Ä—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sync/       # –û—Ñ—Ñ–ª–∞–π–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ entities/   # TypeORM —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/         # Next.js Frontend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/           # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/          # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/        # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/        # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ mobile/          # React Native Mobile
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ screens/      # –≠–∫—Ä–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/     # API –∏ SQLite
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/        # State management
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ wasm_core/       # C/WASM –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–µ —è–¥—Ä–æ
‚îÇ   ‚îú‚îÄ‚îÄ calc_engine.c     # –†–∞—Å—á–µ—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ build.sh          # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ ai/              # AI –º–æ–¥–µ–ª–∏ (–±—É–¥—É—â–µ–µ)
‚îÇ   ‚îî‚îÄ‚îÄ models/           # TensorFlow –º–æ–¥–µ–ª–∏
‚îÇ
‚îî‚îÄ‚îÄ docs/            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ API.md
    ‚îú‚îÄ‚îÄ DEPLOYMENT.md
    ‚îî‚îÄ‚îÄ ARCHITECTURE.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+ / npm
- PostgreSQL 14+ (–∏–ª–∏ SQLite –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Python 3.10+ (–¥–ª—è AI –º–æ–¥—É–ª–µ–π)
- Emscripten (–¥–ª—è WASM)
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. Backend

```bash
cd app/backend
npm install
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª

npm run start:dev
# API: http://localhost:3000
# Docs: http://localhost:3000/api/docs
```

### 2. Frontend

```bash
cd app/frontend
npm install
echo "NEXT_PUBLIC_API_URL=http://localhost:3000" > .env.local

npm run dev
# App: http://localhost:3001
```

### 3. WASM Core

```bash
cd app/wasm_core
./build.sh
# –†–µ–∑—É–ª—å—Ç–∞—Ç: frontend/public/wasm/
```

### 4. Mobile

```bash
cd app/mobile
npm install

npm start
# –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥ –≤ Expo Go
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Docker

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# Backend: http://localhost:3000
# Frontend: http://localhost:3001
# PostgreSQL: localhost:5432
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:3000/api/docs
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –°–º–µ—Ç—ã
- `POST /api/smeta` - –°–æ–∑–¥–∞—Ç—å —Å–º–µ—Ç—É
- `GET /api/smeta` - –°–ø–∏—Å–æ–∫ —Å–º–µ—Ç
- `GET /api/smeta/:id` - –ü–æ–ª—É—á–∏—Ç—å —Å–º–µ—Ç—É
- `POST /api/smeta/:id/positions` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é

#### –ù–æ—Ä–º—ã
- `GET /api/norms` - –°–ø–∏—Å–æ–∫ –Ω–æ—Ä–º
- `GET /api/norms/search?q=` - –ü–æ–∏—Å–∫
- `POST /api/norms/ai-match` - AI –ø–æ–¥–±–æ—Ä

#### AI
- `POST /api/ai/analyze-text` - –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
- `POST /api/ai/analyze-image` - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `POST /api/ai/generate-smeta` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ—Ç—ã

#### –≠–∫—Å–ø–æ—Ä—Ç
- `GET /api/export/:id/pdf` - PDF
- `GET /api/export/:id/excel` - Excel
- `GET /api/export/:id/word` - Word

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞

```sql
-- –ù–æ—Ä–º—ã –§–ï–†/–ì–≠–°–ù/–¢–ï–†
CREATE TABLE norms (
  id UUID PRIMARY KEY,
  code VARCHAR(50),
  standard VARCHAR(20),
  name VARCHAR(500),
  unit VARCHAR(20),
  base_price DECIMAL(10,2),
  ...
);

-- –°–º–µ—Ç—ã
CREATE TABLE smetas (
  id UUID PRIMARY KEY,
  name VARCHAR(255),
  total_cost DECIMAL(15,2),
  ...
);

-- –ü–æ–∑–∏—Ü–∏–∏ —Å–º–µ—Ç
CREATE TABLE smeta_positions (
  id UUID PRIMARY KEY,
  smeta_id UUID REFERENCES smetas(id),
  norm_id UUID REFERENCES norms(id),
  quantity DECIMAL(10,3),
  unit_price DECIMAL(10,2),
  total_price DECIMAL(15,2),
  ...
);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Backend tests
cd app/backend
npm test

# Frontend tests
cd app/frontend
npm test

# E2E tests
npm run test:e2e
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Backend

```bash
npm run start:dev    # Dev mode —Å hot reload
npm run lint         # –õ–∏–Ω—Ç–∏–Ω–≥
npm run format       # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### Frontend

```bash
npm run dev          # Dev —Å–µ—Ä–≤–µ—Ä
npm run build        # Production build
npm run lint         # –õ–∏–Ω—Ç–∏–Ω–≥
```

## üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ó–∞–ø—É—Å–∫

```bash
cd app/mobile
npm start            # Expo dev server
npm run android      # Android
npm run ios          # iOS (—Ç–æ–ª—å–∫–æ Mac)
```

### –°–±–æ—Ä–∫–∞

```bash
eas build --platform android
eas build --platform ios
```

## üö¢ –î–µ–ø–ª–æ–π

### Backend (Production)

```bash
cd app/backend
npm run build
npm run start:prod
```

### Frontend (Production)

```bash
cd app/frontend
npm run build
npm start
```

### Docker Compose

```bash
docker-compose -f docker-compose.prod.yml up -d
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–±—É–¥—É—â–µ–µ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (class-validator)
- ‚úÖ CORS –∑–∞—â–∏—Ç–∞
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ (TypeORM)
- ‚úÖ XSS –∑–∞—â–∏—Ç–∞

## üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

- üá∑üá∫ –†—É—Å—Å–∫–∏–π (–æ—Å–Ω–æ–≤–Ω–æ–π)
- üá¨üáß English (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –í–∫–ª–∞–¥

Contributions are welcome! Please read CONTRIBUTING.md

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- Issues: GitHub Issues
- Email: support@kolibri-smeta.com
- Docs: /docs

## üéØ Roadmap

### v1.1 (Q1 2025)
- [ ] –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è AI –º–æ–¥–µ–ª—å –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] BIM/IFC –ø–∞—Ä—Å–∏–Ω–≥
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- [ ] –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

### v1.2 (Q2 2025)
- [ ] –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- [ ] –û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°
- [ ] REST API v2

### v2.0 (Q3 2025)
- [ ] Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Electron)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ä–æ–∫–æ–≤
- [ ] Blockchain –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–º–µ—Ç
